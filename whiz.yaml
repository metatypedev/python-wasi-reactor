reactor_guest:
  watch: "src/**/*"
  command: "./dev/build.sh"

wasmedge_host:
  watch: "wasmedge/**/*.rs"
  command: "cargo run -p wasmedge_reactor"
  depends_on:
    - reactor_guest

bindgen:
  command: |
    rm -rfv $(deno info --json | jq -r .denoDir)/plug/file wasmedge_reactor/bindings.json
    deno_bindgen -- -p wasmedge_reactor
  depends_on:
    - wasmedge_host


example:
  command: "deno run -A --unstable deno/main.ts"
  depends_on:
    - bindgen
